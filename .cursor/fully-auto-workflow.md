# 完全自动化构建工作流 - Cursor AI 版本

## 🎯 目标

实现**完全自动化**：从代码提交到构建成功，全程无需人工干预。

## 🚀 使用方法

### 在 Cursor 中一键启动

直接说：

```
"完全自动化构建：自动提交代码、检查构建、如果失败就分析错误并修复、重复直到成功"
```

或者更简单：

```
"完全自动化构建直到成功"
```

## 🤖 AI 自动执行的步骤

### 步骤 1: 检查并提交代码
```
AI: "检查是否有未提交的更改..."
AI: [检查 Git 状态]
AI: "发现未提交的更改，正在提交..."
AI: [提交代码]
```

### 步骤 2: 推送到 GitHub
```
AI: "推送到远程分支..."
AI: [推送代码]
AI: "✅ 代码已推送"
```

### 步骤 3: 等待并检查构建状态
```
AI: "等待 GitHub Actions 构建..."
AI: [使用 GitHub MCP Server] "列出最新工作流程运行"
AI: [检查状态] "构建状态：进行中..."
AI: [等待] "构建状态：失败"
```

### 步骤 4: 获取错误日志
```
AI: "构建失败，正在获取错误日志..."
AI: [使用 GitHub MCP Server] "下载最新失败的工作流程运行的日志"
AI: [分析日志] "错误分析：缺少头文件 'credentialprovider.h'"
```

### 步骤 5: 自动修复错误
```
AI: [分析代码] "找到问题，正在修复..."
AI: [修复代码] "已添加缺失的头文件"
AI: [检查修复] "修复完成"
```

### 步骤 6: 提交修复并推送
```
AI: "提交修复..."
AI: [提交] "修复已提交"
AI: [推送] "修复已推送"
```

### 步骤 7: 再次检查构建
```
AI: "等待新的构建完成..."
AI: [检查] "构建状态：成功 ✅"
AI: "🎉 构建成功！任务完成！"
```

### 步骤 8: 如果还是失败，重复步骤 3-7

## 📋 完整命令序列

你可以在 Cursor 中依次执行，或者让 AI 自动执行：

```
1. "检查是否有未提交的更改，如果有就提交并推送"

2. "列出 Build WinUnlock 工作流程的最新运行"

3. "如果构建失败，下载最新失败的工作流程运行的日志"

4. "根据这个构建错误分析并修复代码：[粘贴错误]"

5. "提交修复并推送"

6. "再次检查最新工作流程运行的状态"

7. 如果还是失败，重复步骤 3-6
```

## 🎯 实际使用示例

### 示例 1: 完全自动化（推荐）

```
你: "完全自动化构建直到成功"

AI: [开始自动化流程]
AI: "1. 检查代码状态..."
AI: "2. 提交并推送..."
AI: "3. 等待构建..."
AI: "4. 检查构建状态..."
AI: "构建失败，正在获取错误..."
AI: "5. 分析错误..."
AI: "错误：缺少头文件"
AI: "6. 修复错误..."
AI: [修复代码] "已修复"
AI: "7. 提交并推送..."
AI: "8. 再次检查..."
AI: "✅ 构建成功！"
```

### 示例 2: 分步控制

```
你: "检查构建状态"
AI: [检查] "构建失败"

你: "获取错误日志并自动修复"
AI: [获取日志] [分析] [修复] "已修复"

你: "提交修复并再次检查"
AI: [提交] [检查] "✅ 成功"
```

## 🔧 高级功能

### 自动重试配置

```
"完全自动化构建直到成功，最多重试 10 次"
```

### 指定工作流程

```
"完全自动化构建 'Build WinUnlock' 工作流程直到成功"
```

### 监控模式

```
"监控构建状态，如果失败立即自动修复"
```

## ⚙️ 配置选项

### 设置检查间隔

```
"完全自动化构建，每 30 秒检查一次"
```

### 设置超时时间

```
"完全自动化构建，最多等待 10 分钟"
```

### 设置最大重试次数

```
"完全自动化构建，最多重试 5 次"
```

## 🎯 最佳实践

1. **使用完全自动化命令**：最简单高效
2. **让 AI 自动处理**：不要手动干预，让 AI 完成所有步骤
3. **信任 AI 的分析**：AI 会分析错误并自动修复
4. **查看构建历史**：了解失败模式
5. **及时检查**：推送后立即启动自动化

## 🚨 故障排除

### 构建一直失败

```
"分析最近 5 次失败的构建，找出根本原因并自动修复"
```

### 无法获取工作流程运行

```
"列出所有工作流程"
"列出 Build WinUnlock 工作流程的运行"
```

### 需要手动干预

```
"暂停自动化，让我手动修复这个错误"
```

---

**现在你可以在 Cursor 中实现完全自动化的构建流程了！** 🎉

只需说："完全自动化构建直到成功"

